<h1 class="heading">SALES</h1>

<hr
  style="height: 1px; background-color: green; width: 80%; margin-left: 12%"
/>
<p-toast></p-toast>

<div class="ui-g">
  <div class="ui-md-6 ui-lg-6 ui-sm-12">
    <p-card
      header=""
      [style]="{
        width: '95%',
        'font-size': '15px',
        'margin-left': '23.5%',
        'text-align': 'left',
        color: 'green'
      }"
    >
      <h4 style="color: green; font-weight: bold">Point Of Sales Form :</h4>
      <hr
        style="height:2px;width:82%;background-color:green; margin-left: 1px;"
      />

      <div class="ui-g ui-fluid">
        <form
          style="width:100%;"
          #myForm="ngForm"
          (ngSubmit)="getDataInSalesTable()"
        >
          <div class="ui-g">
            <!-- <div class="ui-md-1 ui-lg-1"></div> -->
            <div class="ui-md-10 ui-lg-10 ui-sm-12">
              <div class="ui-inputgroup">
                <span
                  class="ui-inputgroup-addon"
                  style="width:50%;font-size:15px;"
                  >Product Name: <i style="color: red">*</i></span
                >
                <p-dropdown 
                  [options]="dropdownData"
                  (onChange)="onProductChange()"
                  [(ngModel)]="salesObj.productRegistration"
                  name="testname"
                  pInputText
                  [style]="{width: '380px', height: '40px'}"
                ></p-dropdown>
              </div>
            </div>
          </div>

          <div class="ui-g">
            <!-- <div class="ui-md-3 ui-lg-3"></div> -->
            <div class="ui-md-10 ui-lg-10 ui-sm-12">
              <div class="ui-inputgroup">
                <span
                  class="ui-inputgroup-addon"
                  style="width: 50%;font-size:15px;"
                  >Quantity: <i style="color: red">*</i></span
                >
                <input
                  type="number"
                  required
                  style="width: 100%"
                  name="quantity"
                  [(ngModel)]="salesObj.productQuantity"
                  pInputText
                />
              </div>
            </div>
          </div>

          <div class="ui-g">
            <!-- <div class="ui-md-1 ui-lg-1"></div> -->
            <div class="ui-md-10 ui-lg-10 ui-sm-12">
              <div class="ui-inputgroup">
                <span
                  class="ui-inputgroup-addon"
                  style="width:50%;font-size:15px;"
                  >Total: <i style="color: red">*</i></span
                >
                <!-- <input type="text" required [(ngModel)]="test.details" name="details" pInputText> -->
                <input
                  type="number"
                  
                  required
                  style="width: 100%"
                  name="total"
                  [(ngModel)]=salesObj.total
                  pInputText
                />
              </div>
            </div>
          </div>
          <div class="ui-g" style="margin-top:20px !important;">
            <div class="ui-md-3 ui-lg-3"></div>
            <div class="ui-md-5 ui-lg-5 ui-sm-12">
              <button
                pButton
                type="submit"
                label="Add to cart"
                [disabled]="myForm.form.invalid"
                style="margin-top: 0px; background-color:#479761;width:100%;"
             
              ></button>
            </div>
          </div>
        </form>
      </div>
    </p-card>
  </div>
  <div class="ui-md-5 ui-lg-5 ui-sm-12">
    <p-card
      [style]="{
        width: '81%',
        'font-size': '15px',
        'margin-left': '21%',
        'text-align': 'left',
        color: 'green'
      }"
    >
    <div class="ui-g">
        <div class="ui-g-2">
      <h4 style="color: green; font-weight: bold">Cart :</h4>
    </div>
    <div class="ui-g-3">
        <img src="assets/icons8-shopping-cart-30.png" >
    </div>
    <div class="ui-g-4"></div>
    <div class="ui-g-3">
            <button
            pButton
            type="button"
            label="Save"
            [disabled]="disablesavebutton"
            (click)="saveSales()"
            style="margin-top: 0px; background-color:#479761;width:100%;"        
          ></button>
    </div>
    </div>
      <hr
        style="height:2px;width:100%;background-color:green; margin-left: 1px;"
      />

      <!-- <p style="margin:10px" [hidden]="facilities.length">No Facility selected!</p> -->
      <p-table [ngStyle]="{textAlign:'center'}" [totalRecords]="totalRecords" #dt [paginator]="true" [rows]="5" [value]="tableData">
          <ng-template pTemplate="header">
              <tr>
                  <th [ngStyle]="{textAlign:'center'}" *ngFor="let col of cols">
                      {{col.header}}
                  </th>
                  <th style="text-align: center;" pResizableColumn>
                        Actions
                 </th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-car  let-rowData let-rowIndex>
              <tr [pSelectableRow]="rowData">
                  <td *ngFor="let col of cols;">
                      {{car[col.field]}}
                  </td>  
                  <td>
                        <button pButton [ngStyle]="{width:'70px',margin:'6px'}" type="button" label="Delete" (click)="deleteProduct(tableData.indexOf(rowIndex))" class="ui-button-danger"></button>

                  </td>               
              </tr>
          </ng-template>
      </p-table>
    </p-card>
  </div>
</div>

